{"ast":null,"code":"const getState = _ref => {\n  let {\n    getStore,\n    getActions,\n    setStore\n  } = _ref;\n  return {\n    store: {\n      token: null,\n      message: null,\n      demo: [{\n        title: \"First Task\",\n        done: false\n      }, {\n        title: \"Second Task\",\n        done: false\n      }]\n    },\n    actions: {\n      // Use getActions to call a function within a function\n      exampleFunction: () => {\n        getActions().changeColor(0, \"green\");\n      },\n      login: async (email, password) => {\n        // THIS WAS USED TO TEST FOR LOGIN TRY IT AND CHECK YOUR CONSOLE\n        console.log(\"I want to login oooo\");\n        console.log(email);\n        console.log(password); // THIS WAS USED TO TEST FOR LOGIN TRY IT AND CHECK YOUR CONSOLE\n\n        const opts = {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            email: email,\n            password: password\n          })\n        };\n\n        try {\n          const resp = await fetch('http://127.0.0.1:5000/token', opts);\n\n          if (resp.status !== 200) {\n            alert('Invalid credentials');\n            return false;\n          }\n\n          const data = await resp.json();\n          console.log('this came from backend', data);\n          sessionStorage.setItem('token', data.access_token);\n          setStore({\n            token: data.access_token\n          });\n          return true;\n        } catch (error) {\n          console.error(\"there was an error login in!!!\", error);\n        }\n      },\n      loadSomeData: () => {\n        // fetching data from the backend\n        fetch(\"http://localhost:5000/\").then(resp => resp.json()).then(data => setStore({\n          message: data.message\n        })).catch(error => console.log(\"Error loading data\", error));\n      },\n      changeColor: (index, color) => {\n        //get the store\n        const store = getStore(); //we have to loop the entire demo array to look for the respective index\n        //and change its color\n\n        const demo = store.demo.map((elm, i) => {\n          if (i === index) elm.background = color;\n          return elm;\n        }); //reset the global store\n\n        setStore({\n          demo: demo\n        });\n      }\n    }\n  };\n};\n\nexport default getState; //     try {\n//         dispatch({\n//             type: LOGIN_REQUEST,\n//         });\n//         const config = {\n//             headers: {\n//                 'Content-Type': 'application/json',\n//             },\n//         };\n//         const { data } = await axios.post(\n//             '/api/login',\n//             { email, password },\n//             config\n//         );\n//         dispatch({\n//             type: LOGIN_SUCCESS,\n//             payload: data,\n//         });\n//         localStorage.setItem('userInfo', JSON.stringify(data));\n//     }\n//     catch (error) {\n//         dispatch({\n//             type: LOGIN_FAIL,\n//             payload:\n//                 error.response && error.response.data.message\n//                     ? error.response.data.message\n//                     : error.message,\n//         });\n//     }\n// };\n// export const logout = () => (dispatch) => {\n//     localStorage.removeItem('userInfo');\n//     dispatch({ type: LOGOUT });\n//     dispatch({ type: USER_DETAILS_RESET });\n//     dispatch({ type: ORDER_LIST_MY_RESET });\n//     dispatch({ type: USER_LIST_RESET });\n// };\n// export const register = (name, email, password) => async (dispatch) => {\n//     try {\n//         dispatch({\n//             type: REGISTER_REQUEST,\n//         });\n//         const config = {\n//             headers: {\n//                 'Content-Type': 'application/json',\n//             },\n//         };\n//         const { data } = await axios.post(\n//             '/api/users',\n//             { name, email, password },\n//             config\n//         );\n//         dispatch({\n//             type: REGISTER_SUCCESS,\n//             payload: data,\n//         });\n//         dispatch({\n//             type: LOGIN_SUCCESS,\n//             payload: data,\n//         });\n//         localStorage.setItem('userInfo', JSON.stringify(data));\n//     }\n//     catch (error) {\n//         dispatch({\n//             type: REGISTER_FAIL,\n//             payload:\n//                 error.response && error.response.data.message\n//                     ? error.response.data.message\n//                     : error.message,\n//         });\n//     }\n// };\n// // import {createAction }  from '@reduxjs/toolkit'\n// // // export const loginAction = createAction('LOGIN_ACTION')\n// // export const loginAction = createAction('LOGIN_ACTION', (username, password) => {\n// //   return {\n// //     payload: {\n// //         const opts = {\n// //             method: 'POST',\n// //             headers: {\n// //               'Content-Type': 'application/json'\n// //             },\n// //             body: JSON.stringify({\n// //               'email': email ,\n// //               'password': password\n// //             })\n// //           };\n// //           fetch('http://127.0.0.1:5000/token', opts)\n// //           .then( resp => {\n// //             if (resp.status === 200) return resp.json();\n// //             else alert ('there is an error');\n// //           })\n// //           .then(data => {\n// //             sessionStorage.setItem('token', data.access_token);\n// //             // window.location.href = '/dashboard';\n// //           })\n// //           .catch(error => { \n// //               console.error('there was an error', error);\n// //             });\n// //     }\n// //   }\n// // }\n// // )","map":{"version":3,"names":["getState","getStore","getActions","setStore","store","token","message","demo","title","done","actions","exampleFunction","changeColor","login","email","password","console","log","opts","method","headers","body","JSON","stringify","resp","fetch","status","alert","data","json","sessionStorage","setItem","access_token","error","loadSomeData","then","catch","index","color","map","elm","i","background"],"sources":["/Users/aroyehunoluwasegun/Downloads/proxy-storeIssue/src/Components/store/actions/actions.js"],"sourcesContent":["const getState = ({getStore, getActions, setStore}) => {\n    \n    return {\n        \n        store: {\n            token: null,\n            message: null,\n            demo: [ \n                { \n                    title: \"First Task\", \n                    done: false \n                }, \n                { \n                    title: \"Second Task\", \n                    done: false \n                } \n            ],\n         \n        },\n        \n        actions: {\n            // Use getActions to call a function within a function\n            exampleFunction: () => {\n                getActions().changeColor(0, \"green\");\n            },\n\n            login: async (email, password) => {\n                // THIS WAS USED TO TEST FOR LOGIN TRY IT AND CHECK YOUR CONSOLE\n                console.log(\"I want to login oooo\")\n                console.log(email)\n                console.log(password)\n                // THIS WAS USED TO TEST FOR LOGIN TRY IT AND CHECK YOUR CONSOLE\n                const opts = {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                    },\n                    body: JSON.stringify({\n                        email: email,\n                        password: password,\n                    }),\n                };\n\n                try {\n                    const resp = await fetch('http://127.0.0.1:5000/token', opts)\n                    if (resp.status !== 200) {\n                        alert('Invalid credentials');\n                        return false;\n                    }\n\n                    const data = await resp.json();\n                    console.log('this came from backend',data );\n                    sessionStorage.setItem('token', data.access_token);\n                    setStore({token: data.access_token});\n                    return true;\n                }\n                catch (error) {\n                    console.error(\"there was an error login in!!!\", error);\n                }\n               \n            },\n\n            loadSomeData: () => {\n                // fetching data from the backend\n                fetch(\"http://localhost:5000/\")\n                    .then(resp => resp.json())\n                    .then(data => setStore({message: data.message}))\n                    .catch(error => console.log(\"Error loading data\", error));\n            },\n            changeColor: (index, color) => {\n                //get the store\n                const store = getStore();\n\n                //we have to loop the entire demo array to look for the respective index\n                //and change its color\n                const demo = store.demo.map((elm, i) => {\n                    if (i === index) elm.background = color;\n                    return elm;\n                });\n                \n\n                //reset the global store\n                setStore({ demo: demo });\n            },\n\n           \n            \n        }\n    };\n};\n\n\nexport default getState;\n\n//     try {\n//         dispatch({\n\n//             type: LOGIN_REQUEST,\n//         });\n\n//         const config = {\n//             headers: {\n//                 'Content-Type': 'application/json',\n//             },\n//         };\n\n//         const { data } = await axios.post(\n//             '/api/login',\n//             { email, password },\n//             config\n//         );\n\n//         dispatch({\n//             type: LOGIN_SUCCESS,\n//             payload: data,\n//         });\n\n//         localStorage.setItem('userInfo', JSON.stringify(data));\n//     }\n\n//     catch (error) {\n//         dispatch({\n//             type: LOGIN_FAIL,\n//             payload:\n//                 error.response && error.response.data.message\n//                     ? error.response.data.message\n//                     : error.message,\n//         });\n//     }\n// };\n\n// export const logout = () => (dispatch) => {\n//     localStorage.removeItem('userInfo');\n//     dispatch({ type: LOGOUT });\n//     dispatch({ type: USER_DETAILS_RESET });\n//     dispatch({ type: ORDER_LIST_MY_RESET });\n//     dispatch({ type: USER_LIST_RESET });\n// };\n\n// export const register = (name, email, password) => async (dispatch) => {\n//     try {\n//         dispatch({\n//             type: REGISTER_REQUEST,\n//         });\n\n//         const config = {\n//             headers: {\n//                 'Content-Type': 'application/json',\n//             },\n//         };\n\n//         const { data } = await axios.post(\n//             '/api/users',\n//             { name, email, password },\n//             config\n//         );\n\n//         dispatch({\n//             type: REGISTER_SUCCESS,\n//             payload: data,\n//         });\n\n//         dispatch({\n//             type: LOGIN_SUCCESS,\n//             payload: data,\n//         });\n\n//         localStorage.setItem('userInfo', JSON.stringify(data));\n//     }\n\n//     catch (error) {\n//         dispatch({\n//             type: REGISTER_FAIL,\n//             payload:\n//                 error.response && error.response.data.message\n//                     ? error.response.data.message\n//                     : error.message,\n//         });\n//     }\n// };\n\n\n\n// // import {createAction }  from '@reduxjs/toolkit'\n\n\n\n// // // export const loginAction = createAction('LOGIN_ACTION')\n\n// // export const loginAction = createAction('LOGIN_ACTION', (username, password) => {\n// //   return {\n// //     payload: {\n// //         const opts = {\n// //             method: 'POST',\n// //             headers: {\n// //               'Content-Type': 'application/json'\n// //             },\n      \n// //             body: JSON.stringify({\n// //               'email': email ,\n// //               'password': password\n// //             })\n// //           };\n// //           fetch('http://127.0.0.1:5000/token', opts)\n// //           .then( resp => {\n// //             if (resp.status === 200) return resp.json();\n// //             else alert ('there is an error');\n// //           })\n// //           .then(data => {\n// //             sessionStorage.setItem('token', data.access_token);\n// //             // window.location.href = '/dashboard';\n// //           })\n// //           .catch(error => { \n// //               console.error('there was an error', error);\n// //             });\n// //     }\n// //   }\n// // }\n// // )\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}